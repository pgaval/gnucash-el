<!--
      (Do not remove this comment block.)
  Version: 2.0.0
  Last modified: July 9th 2006
  Maintainers: 
               Chris Lyttle <chris@wilddev.net>
  Author:
  		Jon Lapham <lapham@extracta.com.br>
  	Updated	Bengt Thuree <bengt@thuree.com>
  Originally written by Carol Champagne.
  Translators:
               (translators put your name and email here)
-->
<chapter id="chapter_txns">
  <title>Transactions</title>

  <para>This chapter will give you the basic information you need to
  understand and use transactions in GnuCash. Whereas accounts are the
  framework and structure of a chart of accounts, transactions are the data
  which fills each account.</para>

  <sect1 id="txns-concepts1">
    <title>Basic Concepts</title>

    <para>A <emphasis>transaction</emphasis> in a double entry accounting
    system such as GnuCash is an exchange between at least 2 accounts. Thus, a
    single transaction must always consist of at least two parts, a "from" and
    a "to" account. The "from" account is passing value to the "to" account.
    Accountants call these parts of a transaction <emphasis>Ledger
    Entries</emphasis>. In GnuCash, they are called
    <emphasis>Splits</emphasis>.</para>

    <para>For example, you receive a paycheck and deposit it into your savings
    account at the bank. The <emphasis>transaction</emphasis> that occurs is
    that your bank savings account (an asset) received money from your income
    account. Two accounts are affected, and in this case there is a net
    increase in your equity.</para>

    <para>Working with transactions in GnuCash is performed using what is
    known as the <emphasis>account register</emphasis>. Every account you
    create has an account register. It will appear familiar to you as it looks
    very similar to the log used to track checkbooks.</para>
  </sect1>

  <sect1 id="txns-registers1">
    <title>The Account Register</title>

    <para>The <emphasis>account register</emphasis> is the GnuCash window
    which allows you to view or edit preexisting transactions, or add new
    transactions for a particular account. To enter the account register,
    simply highlight the account name in the account tree window and
    double-click to open it. You can also click the
    <guibutton>Open</guibutton> button in the tool bar or use the right mouse
    button menu to open the account. GnuCash will display the account register
    window.</para>

    <sect2 id="txns-registers-twoaccount2">
      <title>Simple Transaction</title>

      <para>For example, starting with the chart of accounts we created in the
      previous chapter <filename>gcashdata_3</filename>, double click on the
      <guilabel>checking</guilabel> asset account. Let's add a simple
      transaction to the checking account. When you first create your accounts
      in GnuCash, it is common to start them off with an initial
      balance.</para>

      <para>In the first transaction row, enter a date (eg: March, 1, 2006), a
      description (eg: "Opening Balance"), click on the Transfer pop-up menu
      and select <guilabel>Equity:Opening Balances</guilabel>, add a deposit
      value of $1000, and press the Enter key. The account register should now
      appear similar to this figure:</para>

      <screenshot id="txns-register-2account">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_register_2account.png"
                       format="PNG" srccredit="Bengt  Thuree" />
          </imageobject>

          <textobject>
            <phrase>The Checking Account - Register</phrase>
          </textobject>

          <caption><para>This image shows <guilabel>Assets:Checking -
          Register</guilabel> after inserting a starting value
          transaction.</para></caption>
        </mediaobject>
      </screenshot>

      <para>Setting the starting balances of an account is an example of a
      simple two account transaction. In this case, affecting the
      <guilabel>Assets:Checking</guilabel> and the <guilabel>Equity:Opening
      Balances</guilabel> accounts.</para>

      <para>As another example of a simple 2 account transaction, add another
      transaction to describe the purchase of $45.21 worth of groceries. From
      within the Assets:Checking account, you would set
      <guilabel>Transfer</guilabel> to
      <guilabel>Expenses:Groceries</guilabel>. The account register should now
      appear:</para>

      <screenshot id="txns-register-2account2">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_register_2account2.png"
                       format="PNG" srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>The Checking Account - Register</phrase>
          </textobject>

          <caption><para>This image shows <guilabel>Assets:Checking -
          Register</guilabel> after adding a transaction for
          groceries.</para></caption>
        </mediaobject>
      </screenshot>
    </sect2>

    <sect2 id="txns-registers-multiaccount2">
      <title>Split Transaction</title>

      <para>The need for 3 or more account transactions occurs when you need
      to split either the "from" or the "to" account in a transaction into
      multiple accounts. The classic example of this is when you receive a
      paycheck. Your take home pay from a paycheck will typically be less than
      your net pay, with the difference being due to taxes, retirement account
      payments, and/or other items. Thus, the single transaction of you
      receiving a paycheck involves other accounts besides simply
      <guilabel>Assets:Checking</guilabel> and
      <guilabel>Income:Salary</guilabel>.</para>

      <para>To add a paycheck transaction from the
      <guilabel>Assets:Checking</guilabel> account register window, click on a
      new transaction line, and click on <guilabel>Split</guilabel>. First
      enter the description of this transaction on the first line (eg:
      "Employers R Us"). In the "split" line below this, enter the deposit
      into <guilabel>Assets:Checking</guilabel> (eg:$670) (This is due to a
      current bug, that demands the first line in a split is the actual
      account). Follow this with the various tax deposits
      (<guilabel>Assets:Checking</guilabel> (eg: $670),
      <guilabel>Expenses:Taxes:Federal</guilabel> (eg: $180),
      <guilabel>Expenses:Taxes:Medicare</guilabel> (eg: $90), and
      <guilabel>Expenses:Taxes:Social Security</guilabel> (eg: $60)) and
      lastly the gross total of your paycheck (eg: $1000) as a withdrawal
      transfer from <guilabel>Income:Salary</guilabel>. The final split should
      look like this:</para>

      <screenshot id="txns-register-multiaccount">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_register_multiaccount.png"
                       format="PNG" srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Account Register - Split Transaction</phrase>
          </textobject>

          <caption><para>This image shows <guilabel>Assets:Checking -
          Register</guilabel> after adding a split transaction for
          salary.</para></caption>
        </mediaobject>
      </screenshot>
    </sect2>

    <sect2 id="txns-registers-features2">
      <title>Features of the Account Register</title>

      <para>The title bar of the account register displays the account name,
      which in this case is <guilabel>Assets:Checking</guilabel>. Below the
      title bar, the menu bar displays the menu items available within the
      account register, and the tool bar contains handy buttons that help you
      work with the account register.</para>

      <para>Although each transaction has at least two splits, all you see in
      the basic register is a summary of the splits affecting the current
      account. In the Transfer column, you can see the other account from
      which money is <emphasis>transferred</emphasis> into or out of this
      account. If the transaction affects more than two accounts, GnuCash
      displays <guilabel>-- Split Transaction --</guilabel> to show it is a
      multiple-split transaction. You can see the individual splits of each
      transaction by clicking the <guilabel>Split</guilabel> button in the
      tool bar while selecting the appropriate transaction.</para>

      <para>For split transactions, the first line of the transaction is the
      <emphasis>transaction line</emphasis>. It contains a
      <guilabel>Date</guilabel>, optional <guilabel>Num</guilabel> (such as a
      check number), transaction <guilabel>Description</guilabel>, total
      amount affecting the current account (<guilabel>Tot Deposit</guilabel>
      here), and updated account <guilabel>Balance</guilabel> after the
      current transaction. Note that in the expanded view, the
      <guilabel>Transfer</guilabel> column heading disappears, and there is no
      account name listed in that field. This line shows you only a summary of
      the transaction's effect on the current account. For more detailed
      information, you need to look at the individual splits that make up the
      transaction.</para>

      <para>The partial lines below the transaction line are the
      <emphasis>split lines</emphasis>, and they are separated by gray lines.
      As you highlight one of the split lines, the column headings change to
      show the split-related fields:</para>

      <screenshot id="txns-registersplit2">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_registersplit2.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>How split headings change</phrase>
          </textobject>

          <caption><para>This image shows how split headings
          change.</para></caption>
        </mediaobject>
      </screenshot>

      <para>Each split contains an optional <guilabel>Action</guilabel>, or
      type of split, which you can either type in or choose from a pull-down
      list. The split also contains an optional <guilabel>Memo</guilabel>
      which describes the split. Each split affects an
      <guilabel>Account</guilabel>, which can be selected from a pull-down
      list of your accounts. The <guilabel>R</guilabel> field indicates
      whether the split has been reconciled. The last two columns show the
      amount of the split and whether money is coming into or going out of the
      account.</para>

      <para>As we discussed in <xref linkend="basics-accounting1" />, total
      debits (left-column entries) must equal total credits (right-column
      entries) for each transaction. In the example shown above, the total
      debits equal the total credits, so this transaction is balanced. If you
      notice, the transaction line contains the same debit amount as the
      <guilabel>Checking</guilabel> split line. Why is this shown twice?
      Because the transaction line is merely a <emphasis>summary</emphasis> of
      the transaction's effect on the current account. The same transaction in
      a different account will have a different transaction line, one that
      shows the effect on that particular account. You can see this by
      highlighting another split line and clicking the
      <guilabel>Jump</guilabel> button on the tool bar.</para>

      <para>In this example, if you jump to the
      <guilabel>Income:Salary</guilabel> account, GnuCash brings up the same
      transaction in the <guilabel>Income:Salary - Register</guilabel>:</para>

      <screenshot id="txns-registersplit3">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_registersplit3.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>A jump to the Income:Salary account</phrase>
          </textobject>

          <caption><para>This image shows a jump to the
          <guilabel>Income:Salary</guilabel> account.</para></caption>
        </mediaobject>
      </screenshot>

      <para>Note that the transaction line total now summarizes the effect on
      the <guilabel>Income:Salary</guilabel> account instead of the
      <guilabel>Checking Account</guilabel>, because you are looking at the
      <guilabel>Income:Salary</guilabel> account register. The splits are
      exactly the same, but the transaction line now reflects the credit to
      the <guilabel>Income:Salary</guilabel> account.</para>

      <para>At the bottom left of the register window, GnuCash displays
      helpful messages as you move about the register. To the right, you can
      see the current account balance and the total of cleared splits.</para>
    </sect2>

  </sect1>

  <sect1 id="txns-regstyle1">
    <title>Choosing a Register Style</title>

    <para>GnuCash offers several options for viewing your registers. The
    default style is <guilabel>Basic Ledger</guilabel> mode, which displays
    only the summary of splits affecting the current account. This is the
    style that most closely resembles other popular personal financial
    packages.</para>

    <para>You can choose a different register style by selecting
    <guimenu>View</guimenu> -&gt; <guisubmenu>Auto-Split Ledger</guisubmenu>
    style expands the current transaction automatically. As you highlight a
    new transaction in the register, the transaction automatically expands to
    show all splits. The <guimenu>View</guimenu> -&gt; <guisubmenu>Transaction
    Journal</guisubmenu> style is more like an accounting journal, in which
    all splits are shown for all transactions.</para>

    <para>All styles permit you to view your data in either single-line or
    double-line format. Select <guimenu>View</guimenu> -&gt;
    <guimenuitem>Double Line</guimenuitem>, and you will see your transaction
    line expand to two register lines.</para>
    
    <para>Let's have a closer look at how the Basic Ledger and Transaction Journal view differs.
    </para>
    <para>For this example, let's assume that you have a checking account with $10,000,
    and have decided to really splurge by purchasing 3 pair of Jeans for $1,000.
    Now, you can either record this as one simple transaction and move $1,000 to Expenses:Clothes.
    Or, you can record a split transaction, and record each Jeans individually.</para>
    <para>Technically they are the same, but from an accounting point of view, when you 
    record each Jeans purchase separately, the Expenses:Clothes account will record three
    different transactions.</para>
    <para>The below screenshots will illustrate this a bit better</para>
    
    <para>First let's purchase the Jeans from your checking account</para>
    
          <screenshot id="txns-registersplit4">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_registersplit4.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>3 Jeans purchases</phrase>
          </textobject>

          <caption><para>
            This image shows one split transaction with 3 Jeans purchases
          </para></caption>
        </mediaobject>
      </screenshot>
      
     <para>The we open the Expenses:Clothes account, and look at it from the default Basic Ledger view.
     As you can see, we have three entries here, but there were only one entry in the checking account.
     If you look carefully, you will see that each row have a different amount, $200, $300, and $500.
     Each row's transaction line reflects a one split row</para> 
      <screenshot id="txns-registersplit5">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_registersplit5.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>A jump to the Expenses:Clothes account</phrase>
          </textobject>

          <caption><para>This image shows <guilabel>Expenses:Clothes</guilabel> account
          in Basic Ledger mode.</para></caption>
        </mediaobject>
      </screenshot>
      
      <para>If we view the Expenses:Clothes account in Transaction Journal mode, you will again, only see
      the original split transaction.</para>
      
      <screenshot id="txns-registersplit6">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_registersplit6.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>A jump to the Expenses:Clothes account</phrase>
          </textobject>

          <caption><para>This image shows <guilabel>Expenses:Clothes</guilabel> account in
          Transaction Journal mode.</para></caption>
        </mediaobject>
      </screenshot>

    
  </sect1>

  <sect1 id="txns-shortcuts1">
    <title>Using Entry Shortcuts</title>

    <para>GnuCash provides several time-saving shortcuts for entering your
    data. When you type the first few characters of a description that you
    have used before, the QuickFill feature automatically fills in the rest of
    the transaction as you last entered it. When you type in the first
    characters of an account name in either the <guilabel>Transfer</guilabel>
    field of the transaction line or the <guilabel>Account</guilabel> field of
    the split line, QuickFill will automatically complete the name from your
    account list. It also helps you with entering sub-accounts in these
    fields: simply type the first characters of the parent account name
    followed by a colon and the first characters of the sub-account name. For
    example, to enter <guilabel>Assets:Checking</guilabel>, you might type
    <userinput>A:C</userinput> and let GnuCash fill in the rest.</para>

    <para>Register keyboard shortcuts also save you time, and GnuCash provides
    several of them. In the date field, you can type:</para>

    <itemizedlist>
      <listitem>
        <para><keycap>+</keycap> or <keycap>=</keycap> to increment the date
        and <keycap>-</keycap> or <keycap>_</keycap> to decrement the
        date</para>
      </listitem>

      <listitem>
        <para><keycap>]</keycap> or <keycap>}</keycap> to increment the month
        and <keycap>[</keycap> or <keycap>{</keycap> to decrement the
        month</para>
      </listitem>

      <listitem>
        <para><keycap>M</keycap> or <keycap>m</keycap> to enter the first date
        of the month</para>
      </listitem>

      <listitem>
        <para><keycap>H</keycap> or <keycap>h</keycap> to enter the last date
        of the month</para>
      </listitem>

      <listitem>
        <para><keycap>Y</keycap> or <keycap>y</keycap> to enter the first date
        of the year</para>
      </listitem>

      <listitem>
        <para><keycap>R</keycap> or <keycap>r</keycap> to enter the last date
        of the year</para>
      </listitem>

      <listitem>
        <para><keycap>T</keycap> or <keycap>t</keycap> to enter today's
        date</para>
      </listitem>
    </itemizedlist>

    <para>In the <guilabel>Num</guilabel> field of the transaction line, you
    can type <keycap>+</keycap> to increment the transaction number from the
    last one you typed in. Typing <keycap>-</keycap> will decrement the
    number. This will also work in the <guilabel>Action</guilabel> field of
    the split line, if you choose to enter split numbers there. The
    <guilabel>Action</guilabel> field also supports QuickFill - if you type
    the first characters of a common action (such as
    <guilabel>Deposit</guilabel>), GnuCash will fill in the rest.</para>

    <para>The <guilabel>Transfer</guilabel> field supports QuickFill
    of account names.  You can start typing an account name and
    GnuCash will fill in the remaining part of the name.  Typing the
    separator character at any time will complete the current level of
    the account name, leaving the cursor positioned to start the next
    level of account name.  For example, typing "A:C" with the
    standard set of account names will complete to the
    "Assets:Checking" account.  You can also type the
    <keycap>Menu</keycap> or <keycap>Ctrl-Down</keycap> keys in this
    field to pop up a list of all account names.</para>

    <para>In any of the amount fields, you can use a built-in calculator.
    Simply type in the first value, followed by <keycap>+</keycap>,
    <keycap>-</keycap>, <keycap>*</keycap>, or <keycap>/</keycap>, then type
    in the second value. GnuCash will perform the calculation and return the
    resulting value to the amount field when you press the
    <keycap>Tab</keycap> key.</para>

    <para>All of the menu items have access keys defined, and these are marked
    by underlined characters in the menu names. Press <keycap>Alt</keycap> +
    [underlined character] to bring up the menu, then select an item by typing
    its underlined character. For example, typing <keycombo>
        <keycap>Alt</keycap>

        <keycap>T</keycap>
      </keycombo> brings up the Transaction menu, then typing
    <keycap>S</keycap> will split the transaction. A few of the menu items
    also have shortcut keys that immediately invoke the command (typically
    using the <keycap>Ctrl</keycap> key).  These shortcuts are listed next
    to the item.</para>

    <para>To move around the register, use these keys to save time:</para>

    <itemizedlist>
      <listitem>
        <para><keycap>Tab</keycap> to move to the next field, <keycombo>
            <keycap>Shift</keycap>

            <keycap>Tab</keycap>
          </keycombo> to move to the previous field</para>
      </listitem>

      <listitem>
        <para><keycap>Home</keycap> to move to the beginning of the field,
        <keycap>End</keycap> to move to the end of the field</para>
      </listitem>

      <listitem>
        <para><keycap>Enter</keycap> or <keycap>↓</keycap> to move to the next
        transaction, <keycap>↑</keycap> to move to the previous
        transaction</para>
      </listitem>

      <listitem>
        <para><keycap>Page Up</keycap> to move up one screen, <keycap>Page
        Down</keycap> to move down one screen</para>
      </listitem>

      <listitem>
        <para><keycombo>
            <keycap>Shift</keycap>

            <keycap>Page Up</keycap>
          </keycombo> to go to the first transaction, <keycombo>
            <keycap>Shift</keycap>

            <keycap>Page Down</keycap>
          </keycombo> to go to the last transaction</para>
      </listitem>
    </itemizedlist>

    <para>In the <guilabel>Reconcile</guilabel> window you can use these
    keyboard shortcuts:</para>

    <itemizedlist>
      <listitem>
        <para><keycap>Tab</keycap> moves to the next box and
        <keycap>Shift</keycap>-<keycap>Tab</keycap> moves to the previous
        box</para>
      </listitem>

      <listitem>
        <para>Space bar toggles the status between reconciled and not
        reconciled</para>
      </listitem>

      <listitem>
        <para><keycap>↑</keycap> and <keycap>↓</keycap> navigate through the
        entries within the current box</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="txns-reconcile1">
    <title>Reconciliation</title>

    <para>Transactions are typically checked against bank statements - a
    process known as "reconciliation". GnuCash keeps track of the
    reconciliation status of each transaction.</para>

    <para>The reconciliation status of a transaction is shown by the
    reconciliation (R) field. 'y' indicates that a transaction has been
    reconciled, 'n' indicates that it has not, and 'c' indicates that it has
    been cleared, but not reconciled. You can toggle the reconciliation status
    between 'n' and 'c' by clicking in the (R) field; you can set it to 'y' by
    using the Reconciliation Window.</para>

    <para>At the bottom of the account window, there are two running totals:
    'Balance', and 'Cleared'. 'Cleared' should correspond to how much money
    the bank thinks you have in your account, while 'Balance' includes
    outstanding transactions.</para>

    <sect2 id="txns-reconcile-window2">
      <title>Reconcile Window</title>

      <para>The Reconciliation Window is used to reconcile a GnuCash account
      with a statement that a bank or other institution has sent you.
      Reconciliation is useful not only to double-check your records against
      those of your bank, but also to get a better idea of outstanding
      transactions, e.g. uncashed checks.</para>

      <para>At the bottom of the account window, there are two running
      balances: the "cleared and reconciled" balance, and the "total" balance.
      The "cleared and reconciled" balance should correspond to how much money
      the bank thinks you have in your account, and the "total" balance
      includes outstanding transactions.</para>

      <para>For example, when you write a check for something, you should
      enter the transaction into GnuCash. The reconciliation (R) field of the
      transaction will initially contain n (new). Your new entry will
      contribute to the "total" balance, but not to the "cleared and
      reconciled" balance. Later, if you think that the check has been cashed,
      you might click on the transaction's R field to change it to c
      (cleared). When you do this, the "cleared and reconciled" balance will
      change to include this amount. When the bank statement arrives, you can
      then compare it to what you've recorded in GnuCash in the Reconciliation
      window. There, you will be able to change the R field to y (reconciled).
      You cannot reconcile in the register window, you must use the
      reconciliation window. Once a transaction has been marked "reconciled",
      it can no longer be easily changed.</para>

      <para>To use the Reconciliation Windows, select an account from the
      account tree and click on <guimenu>Actions</guimenu> -&gt;
      <guimenu>Reconcile</guimenu>. A window will appear in which you can
      enter the reconcile information.</para>

      <screenshot id="txns-reconcile-window-1">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_reconcile_window1.png"
                       format="PNG" srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Reconcile Window</phrase>
          </textobject>

          <caption><para>The initial reconcile window.</para></caption>
        </mediaobject>
      </screenshot>

      <itemizedlist>
        <listitem>
          <para><emphasis>Reconcile Info: Statement Date</emphasis> - this is
          the date of the statement you will be reconciling against.</para>
        </listitem>

        <listitem>
          <para><emphasis>Reconcile Info: Starting Balance</emphasis> - this
          is a non-editable item which displays the balance from the previous
          reconciliation. It should match the starting balance in your
          statement.</para>
        </listitem>

        <listitem>
          <para><emphasis>Reconcile Info: Ending Balance</emphasis> - this is
          the ending balance as it appears in the statement.</para>
        </listitem>

        <listitem>
          <para><emphasis>Reconcile Info: Include Sub-accounts</emphasis> -
          select this if you want to include the sub-accounts of the currently
          selected account in this reconciliation.</para>
        </listitem>

        <listitem>
          <para><emphasis>Enter Interest Payment</emphasis> - click here to
          enter an interest transaction to the account to be
          reconciled.</para>
        </listitem>
      </itemizedlist>

      <para>Click on the <guibutton>Ok</guibutton> button, and you will see
      the transactions listing reconcile window:</para>

      <screenshot id="txns-reconcile-window-2">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_reconcile_window2.png"
                       format="PNG" srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Reconcile Window</phrase>
          </textobject>

          <caption><para>The transactions listing in the reconcile
          window.</para></caption>
        </mediaobject>
      </screenshot>

      <para>The two lists called <guilabel>Funds In</guilabel> and
      <guilabel>Funds Out</guilabel> lists all the unreconciled transactions.
      The 'R' columns show whether the transactions have been cleared or
      reconciled.</para>

      <para>Now, examine each item on the bank statement, and look for the
      matching item in the Reconcile window.</para>

      <para>If you cannot find one, then perhaps you forgot to enter a
      transaction, or did not know that the transaction had happened. You can
      use the New button on the tool bar, or the New menu item in the
      Transaction menu, to open a register window and enter the missing
      transaction. The new item will appear in the Reconcile window when you
      press enter after entering the transaction.</para>

      <para>When you find the item in the Reconcile window, compare the amount
      in the item to the amount on the statement. If they disagree, you may
      have made an error when you entered the transaction in GnuCash. You can
      use the <guibutton>Edit</guibutton> button on the tool bar, or the
      <guimenu>Edit</guimenu> menu item in the Transaction menu, to open a
      register window and correct the transaction.</para>

      <para>If the amounts agree, click on the item in the Reconcile window.
      The 'R' column will change to 'y' (reconciled) from 'n' or 'c'.  You
      may also use the up/down arrow keys to scroll to the item and then
      press the space key.  This will also change the 'R' column to show the
      item as reconciled.</para>

      <para>You then repeat this for each item that appears on the bank
      statement, verifying that the amounts match with the amounts in GnuCash,
      and marking off transactions in GnuCash as they are reconciled.</para>

      <para>At the bottom of the "Reconcile" window is a "Difference" field,
      which should show $0.00 when you are done reconciling. If it shows some
      other value, then either you have missed transactions, or some amounts
      may be incorrect in GnuCash. (Or, less likely, the bank may have made an
      error.)</para>

      <para>When you have marked off all the items on the bank statement, and
      when the difference is $0.00, press the Finish button on the tool bar or
      select Finish from the Reconcile menu. The Reconcile window will close.
      In the Register window, the R field of the reconciled transactions will
      change to 'y'.</para>

      <para>In this case, we have not received all the information yet, so we
      simply press the <guibutton>Postpone</guibutton>, so we can continue at
      a later stage. Observe that the 'R' column indicates we cleared ('c')
      two transactions. They have not been reconciled yet, but we have
      verified these two transactions so they have been marked as cleared. If
      you look at the status bar at the bottom of the account register, you
      will see a summary of what has been reconciled and what has been cleared
      (<guilabel>Cleared:USD 954.79 Reconciled:USD 0.00</guilabel>)</para>

      <screenshot id="txns-reconcile-window-3">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_reconcile_window3.png"
                       format="PNG" srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Checking account</phrase>
          </textobject>

          <caption><para>The Checking account after postponed the
          reconciliation.</para></caption>
        </mediaobject>
      </screenshot>
    </sect2>
  </sect1>

  <sect1 id="txns-sxn1">
    <title>Scheduled Transactions</title>

    <para>Scheduled transactions are made to help entering repetitive money
    operations, like subscriptions, insurances or taxes. By using scheduled
    transactions, you only have to enter the concerned transaction once, set a
    few parameters like start date, frequency and a little description, and
    then GnuCash will tell you whenever a scheduled transaction is ready to
    create, and create it for you.</para>

    <para>In this howto, we'll take a monthly Internet subscription of 20 USD
    as example, which is taken on the 28th of each month.</para>

    <para>In GnuCash, there are two ways of creating scheduled transactions,
    from the ledger or from the scheduled transactions editor.</para>

    <sect2 id="txns-sxn-ledger2">
      <title>Creating from the Ledger</title>

      <para>Enter the first occurrence of your to-schedule transaction in the
      ledger.</para>

      <screenshot id="txns-sxn-ledger-1">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_ledger1.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Step one creating scheduled transaction from the
            ledger</phrase>
          </textobject>

          <caption><para>Step one creating scheduled transaction from the
          ledger</para></caption>
        </mediaobject>
      </screenshot>

      <note>
        <para>Since we did not create the Expence:Internet account, GnuCash
        will prompt us to create it.</para>
      </note>

      <para>Then you right click on your transaction and select
      "Schedule..."</para>

      <screenshot id="txns-sxn-ledger-2">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_ledger2.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Step two creating scheduled transaction from the
            ledger</phrase>
          </textobject>

          <caption><para>Step two creating scheduled transaction from the
          ledger</para></caption>
        </mediaobject>
      </screenshot>

      <para>A window like this will appear:</para>

      <screenshot id="txns-sxn-ledger-3">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_ledger3.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Step three creating scheduled transaction from the
            ledger</phrase>
          </textobject>

          <caption><para>Step three creating scheduled transaction from the
          ledger</para></caption>
        </mediaobject>
      </screenshot>

      <para>Let's fill the values, we know that the subscription is taken on
      the 28th each month, and the next one is for next month (since we
      entered the one for this month manually) :</para>

      <screenshot id="txns-sxn-ledger-4">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_ledger4.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Filling in data to a scheduled transaction</phrase>
          </textobject>

          <caption><para>Filling in data to a scheduled
          transaction</para></caption>
        </mediaobject>
      </screenshot>

      <para>Click the OK button, and the transaction will be scheduled.
      GnuCash now has memorized this scheduled transaction and on the 28th of
      next month, it will pop up a window asking if it should create it (see
      far below for a screenshot of this window).</para>
    </sect2>

    <sect2 id="txns-sxn-editor2">
      <title>Creating from the Editor</title>

      <para>Another way of entering a scheduled transaction is from the
      Scheduled Transaction Editor, it may be faster if we have several
      scheduled transactions to create at once.</para>

      <para>From the main accounts windows, go in the Actions menu, select
      Scheduled Transactions, a submenu will open in which you'll click
      Scheduled transaction Editor.</para>

      <screenshot id="txns-sxn-editor-1">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor1.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Step one creating scheduled transaction from the
            editor</phrase>
          </textobject>

          <caption><para>Step one creating scheduled transaction from the
          editor</para></caption>
        </mediaobject>
      </screenshot>

      <para>A window like this will pop up :</para>

      <screenshot id="txns-sxn-editor-2">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor2.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Step two creating scheduled transaction from the
            editor</phrase>
          </textobject>

          <caption><para>Step two creating scheduled transaction from the
          editor</para></caption>
        </mediaobject>
      </screenshot>

      <para>This window contains a list, now empty, of all the scheduled
      transactions. Let's create a new one by clicking on the "New" button,
      another window will pop up :</para>

      <screenshot id="txns-sxn-editor-3">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor3.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Step three creating scheduled transaction from the
            editor</phrase>
          </textobject>

          <caption><para>Step three creating scheduled transaction from the
          editor</para></caption>
        </mediaobject>
      </screenshot>

      <para>This window may seem complicated but it's fairly easy to
      understand. First, let's enter a name for this new scheduled
      transaction, this name will only identify it in the Scheduled
      Transaction Editor, it will never appear in the ledger.</para>

      <para>Then we'll enter the transaction's parameters. We know that the
      subscription is taken on the 28th each month, so the start date will be
      Nov 1, 2003 (assuming November is the next month), the frequency will be
      "Monthly", it will be taken every month on the 28th.</para>

      <para>In the "Options" tab you have three options :</para>

      <itemizedlist>
        <listitem>
          <para>"Create automatically" will insert this transaction in the
          ledger without asking you before (see below)</para>
        </listitem>

        <listitem>
          <para>"Create n days in advance" is explicit</para>
        </listitem>

        <listitem>
          <para>"Remind me n days in advance" is explicit and used for example
          when you have to pay something by check, GnuCash can remind you one
          week before so you send your check before the deadline.</para>
        </listitem>
      </itemizedlist>

      <para>The End tab allows you to tell GnuCash that this scheduled
      transaction won't last for ever, for example if you are repaying a loan,
      you can enter the loan end date.</para>

      <para>Since in our example the internet subscription is automatically
      taken from the account, we have no need to create it in advance, nor
      give an end date.</para>

      <para>Finally, enter your transaction in the lower part as you would do
      in the ledger, with the only difference of having no date.</para>

      <note>
        <para>Warning: don't use the ENTER key like in the ledger, as it will
        activate the default button of the whole window : Cancel. Instead, use
        TAB to go to the next field, and when you have finished entering your
        transaction, click on the "Enter" button to validate it.</para>
      </note>

      <para>Now, you should have a window like this:</para>

      <screenshot id="txns-sxn-editor-4">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor4.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Validate a scheduled transaction from the editor</phrase>
          </textobject>

          <caption><para>Validate a scheduled transaction from the
          editor</para></caption>
        </mediaobject>
      </screenshot>

      <para>Remember to click on the Enter icon, to validate and enter the
      transaction.</para>

      <para>Now click OK, it takes you to the previous window, now with one
      item in the list :</para>

      <screenshot id="txns-sxn-editor-5">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor5.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Validate a scheduled transaction from the editor</phrase>
          </textobject>

          <caption><para>Validate a scheduled transaction from the
          editor</para></caption>
        </mediaobject>
      </screenshot>

      <para>If you click in the calendar part on the first day of one month, a
      small window, following your mouse, will show you what is planned for
      this day. To make the small window dissapear again, just click in it 
      one more time.</para>

      <para>You can now close the Scheduled Transaction Editor window, and
      <guilabel>save</guilabel> your work.</para>

      <note>
        <para>What comes below is just an illustration, and is not meant to be
        entered into the GnuCash database at this stage. As per this example,
        the below dialogs will appear when the scheduled transaction is
        supposed to run.</para>
      </note>

      <para>From now on, on each first day of month (or the next time you
      launch GnuCash after this day) a windows will pop up to remind you to
      create this transaction :</para>

      <screenshot id="txns-sxn-editor-6">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor6.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Scheduled transaction popup reminder</phrase>
          </textobject>

          <caption><para>Scheduled transaction popup reminder</para></caption>
        </mediaobject>
      </screenshot>

      <para>You can click on the list entry to see the detailed transaction in
      the lower part, then just click on <guibutton>Forward</guibutton> to
      advance.</para>

      <para>When you click Forward, a window summarizing all transactions to
      be created will appear :</para>

      <screenshot id="txns-sxn-editor-7">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor7.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Scheduled transaction summary</phrase>
          </textobject>

          <caption><para>Scheduled transaction summary</para></caption>
        </mediaobject>
      </screenshot>

      <para>In this window you can adjust the transactions that will be
      created. For example, this month my ISP made a special offer and my
      subscription only costed 10EUR, so I just modified the amount from 20 to
      10.</para>

      <para>When you have finished with this window, just click
      <guibutton>Forward</guibutton> and on the next window click
      <guibutton>Apply</guibutton>. The window will disappear and the
      transactions will be created.</para>

      <para>Then if you take a look in your bank account, you'll see the
      transaction has been created :</para>

      <screenshot id="txns-sxn-editor-8">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_sxn_editor8.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Scheduled transaction created transaction</phrase>
          </textobject>

          <caption><para>Scheduled transaction created
          transaction</para></caption>
        </mediaobject>
      </screenshot>

      <note>
        <para>If you entered the transaction for 28 of April at this stage,
        then please revert back to the last saved GnuCash file.
        <guimenu>File</guimenu> -&gt;<guimenuitem> Open</guimenuitem> and
        choose <filename>gcashdata_3</filename></para>
      </note>
    </sect2>
  </sect1>

  <sect1 id="txns-puttoget1">
    <title>Putting It All Together</title>

    <para>In the previous sections of this chapter the concepts and mechanics
    of working with transactions in GnuCash have been discussed. This section
    will expand upon the chart of accounts initially built in the previous
    chapter, by setting some opening balances, adding transactions and a
    scheduled transaction.</para>

    <sect2 id="txns-puttoget-openfile">
      <title>Open GnuCash file</title>

      <para>Start with opening the previous datafile we stored,
      <filename>gcashdata_3emptyAccts</filename>, and store it as
      <filename>gcashdata_4</filename> directly. The main window should look
      something like this:</para>

      <screenshot id="txns-puttoget1-Charts">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_puttoget_Charts.png" format="PNG"
                       srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Starting point for Putting It All Together</phrase>
          </textobject>

          <caption><para>This image shows the starting point for this
          section.</para></caption>
        </mediaobject>
      </screenshot>
    </sect2>

    <sect2 id="txns-puttoget-open2">
      <title>Opening Balances</title>

      <para>As shown earlier with the <guilabel>Assets:Checking</guilabel>
      account, the starting balances in an account are typically assigned to a
      special account called <guilabel>Equity:Opening Balance</guilabel>. To
      start filling in this chart of account, begin by setting the starting
      balances for the accounts. Assume that there is $1000 in the savings
      account and $500 charged on the credit card.</para>

      <orderedlist>
        <listitem>
          <para>Open the <guilabel>Assets:Savings</guilabel> account register.
          Select <guimenu>View</guimenu> from the menu and check to make sure
          you are in Basic Ledger style. You will view your transactions in
          the other modes later, but for now let's enter a basic transaction
          using the basic default style.</para>
        </listitem>

        <listitem>
          <para>From the <guilabel>Asset:Savings</guilabel> account register
          window, enter a basic 2 account transaction to set your starting
          balance to $1000, transferred from <guilabel>Equity:Opening
          Balance</guilabel>. Remember, basic transactions transfer money from
          a source account to a destination account. Record the transaction
          (press the 'enter' key, or click on the 'enter' icon).</para>
        </listitem>

        <listitem>
          <para>From the <guilabel>Assets:Checking</guilabel> account register
          window, enter a basic 2 account transaction to set your starting
          balance to $1000, transferred from <guilabel>Equity:Opening
          Balance</guilabel>.</para>
        </listitem>

        <listitem>
          <para>From the <guilabel>Liabilities:Visa</guilabel> account
          register window, enter a basic 2 account transaction to set your
          starting balance to $500, transferred from <guilabel>Equity:Opening
          Balance</guilabel>. This is done by entering the $500 as a "charge"
          in the Visa account (or "decrease" in the Opening Balance account),
          since it is money you borrowed. Record the transaction (press the
          'enter' key, or click on the 'enter' icon).</para>
        </listitem>
      </orderedlist>

      <para>You should now have 3 accounts with opening balances set.
      <guilabel>Assets:Checking</guilabel>,
      <guilabel>Assets:Savings</guilabel>, and
      <guilabel>Liabilities:Visa</guilabel>.</para>

      <screenshot id="txns-puttoget1-Charts1">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_puttoget_Charts1.png"
                       format="PNG" srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Chart accounts after setting opening balance</phrase>
          </textobject>

          <caption><para>This image shows the opening
          balances.</para></caption>
        </mediaobject>
      </screenshot>
    </sect2>

    <sect2 id="txns-puttoget-add2">
      <title>Additional Transaction Examples</title>

      <para>Now add some more transactions to simulate a month's expenses.
      During the month, $78 is spent on electricity, $45 on phone, and $350 on
      rent. All paid by check.We also spend $45.21 on groceries, receive $670
      as salary, and paids our Internet bill this month, Finally, let's move
      $100 from the savings account to the checking account.</para>

      <orderedlist>
        <listitem>
          <para>Open the <guilabel>Expenses:Electricity</guilabel> account
          register and enter a simple 2 account transaction to pay the $78
          electrical bill at the end of the current month (eg: March 28,
          2006). Enter a description (eg: Light Company) and the check number
          (eg: 102). The <guilabel>Transfer</guilabel> account should be
          <guilabel>Assets:Checking</guilabel>.</para>
        </listitem>

        <listitem>
          <para>Open the <guilabel>Assets:Checking</guilabel> account register
          and enter a simple 2 account transaction to pay the $45 phone bill
          at the end of the current month (eg: March 28, 2006). Enter a
          description (eg: Phone Company Name) and the check number (eg: 103).
          The <guilabel>Transfer</guilabel> account should be
          <guilabel>Expenses:Phone</guilabel>. Notice that you can enter
          expense transactions from either the credit side (the expense
          accounts) or the debit side (the asset account).</para>
        </listitem>

        <listitem>
          <para>Open the <guilabel>Expenses:Rent</guilabel> account register
          and enter a simple 2 account transaction to pay the $350 in rent at
          the end of the current month (eg: March 28, 2006). Enter a
          description (eg: April Rent) and the check number (eg: 104). The
          <guilabel>Transfer</guilabel> account should be
          <guilabel>Assets:Checking</guilabel>.</para>
        </listitem>

        <listitem>
          <para>Duplicate this transaction using the
          <guibutton>Duplicate</guibutton> button in the tool bar. Start by
          clicking on the current rent transaction, and click on the
          <guilabel>Duplicate</guilabel> icon. Enter the transaction date a
          month out in the future (eg: April 28, 2006), and notice the blue
          line separator that GnuCash uses to separate future transactions
          from current ones. In this way, you can enter transactions before
          they occur.</para>

          <para>You could also set up a scheduled transaction to pay your
          rent, since the value of the rent is likely to be constant for the
          foreseeable future. <itemizedlist>
              <listitem>
                <para>Start by clicking on the current (April 28) rent
                transaction, and click on the <guilabel>Schedule</guilabel>
                icon</para>
              </listitem>

              <listitem>
                <para>Change to <guilabel>Monthly</guilabel>, change
                description if needed and press OK</para>
              </listitem>
            </itemizedlist></para>
        </listitem>

        <listitem>
          <para>To transfer money from your savings account to your checking
          account, open the <guilabel>Assets:Savings</guilabel> account
          register, add a new transaction setting
          the Transfer to <guilabel>Assets:Checking</guilabel> in the amount
          of $100 (date 6 March, 2006).</para>
        </listitem>

        <listitem>
          <para>As another example of a simple 2 account transaction, add
          another transaction to describe the purchase of $45.21 worth of
          groceries on 5 of March. From within the Assets:Checking account, you
          would set <guilabel>Transfer</guilabel> to
          <guilabel>Expenses:Groceries</guilabel>. The account register should
          now appear:</para>
        </listitem>

        <listitem>
          <para>To add a paycheck transaction from the
          <guilabel>Assets:Checking</guilabel> account register window, click
          on a new transaction line, and click on <guilabel>Split</guilabel>.
          First enter the description of this transaction on the first line
          (eg: "Employers R Us"), as well as the date (14 March). In the
          "split" line below this, enter the deposit into
          <guilabel>Assets:Checking</guilabel> (eg:$670) (This is due to a
          current bug, that demands the first line in a split is the actual
          account). Follow this with the various tax deposits
          (<guilabel>Assets:Checking</guilabel> (eg: $670),
          <guilabel>Expenses:Taxes:Federal</guilabel> (eg: $180),
          <guilabel>Expenses:Taxes:Medicare</guilabel> (eg: $90), and
          <guilabel>Expenses:Taxes:Social Security</guilabel> (eg: $60)) and
          lastly the gross total of your paycheck (eg: $1000) as a withdrawal
          transfer from <guilabel>Income:Salary</guilabel>.</para>
        </listitem>

        <listitem>
          <para>You also need to pay for your Internet subscription of 20 USD on
          the 28th.</para>
        </listitem>
      </orderedlist>

      <screenshot id="txns-puttoget2-Charts1">
        <mediaobject>
          <imageobject>
            <imagedata fileref="figures/txns_puttoget_Charts2.png"
                       format="PNG" srccredit="Bengt Thuree" />
          </imageobject>

          <textobject>
            <phrase>Chart accounts after setting all the various
            transactions</phrase>
          </textobject>

          <caption><para>This image shows the ending balances after <xref
          linkend="chapter_txns" />.</para></caption>
        </mediaobject>
      </screenshot>
    </sect2>

    <sect2 id="txns-puttoget-save">
      <title>Save file</title>

      <para>Before we go to the report section, let's save the GnuCash data
      file (<filename>gcashdata_4</filename>).</para>
    </sect2>

    <sect2 id="txns-puttoget-reports">
      <title>Reports</title>

      <para>But only having data available on the computer screen will not
      make your accountant happy, therefore GnuCash comes with a large number
      of highly customizable reports.</para>

      <note>
        <para>More details on the reports will be in the Report chapter</para>
      </note>

      <para>Let's have a look at a <guilabel>Cash Flow</guilabel>, and a
      <guilabel>Transaction</guilabel> Report.</para>

      <orderedlist>
        <listitem>
          <para>First let's have a look at the <guilabel>Cash Flow</guilabel>
          report for the month of March.</para>

          <para>Select the cash flow report from <guimenu>Reports</guimenu>
          -&gt; <guisubmenu>Income &amp; Expense</guisubmenu> -&gt;
          <guimenuitem>Cash Flow</guimenuitem></para>

          <screenshot id="txns-puttoget2-Cash">
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/txns_CashFlow.png" format="PNG"
                           srccredit="Bengt Thuree" />
              </imageobject>

              <textobject>
                <phrase>Cash Flow report for the month of March</phrase>
              </textobject>

              <caption><para>This image shows the Cash Flow report after <xref
              linkend="chapter_txns" />.</para></caption>
            </mediaobject>
          </screenshot>

          <para>To get this customized report, right click in the report and
          choose <guilabel>Report Options</guilabel>. Then set the time
          period, and specify which accounts you want in the report</para>
        </listitem>

        <listitem>
          <para>Now let's have a look at corresponding transaction report for
          the Checking account.</para>

          <para>Select the transaction report from <guimenu>Reports</guimenu>
          -&gt; <guimenuitem>Transaction Report</guimenuitem></para>

          <screenshot id="txns-puttoget2-TransactionRptChecking">
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/txns_TransactionRptChecking.png"
                           format="PNG" srccredit="Bengt Thuree" />
              </imageobject>

              <textobject>
                <phrase>Transaction Report for the Checking account during
                March</phrase>
              </textobject>

              <caption><para>This image shows the Transaction Report for the
              Checking account during March. </para></caption>
            </mediaobject>
          </screenshot>
        </listitem>

        <listitem>
          <para>Now let's change the transaction report to only show the
          various Expenses accounts.</para>

          <screenshot id="txns-puttoget2-TransactionRptExpenses">
            <mediaobject>
              <imageobject>
                <imagedata fileref="figures/txns_TransactionRptExpenses.png"
                           format="PNG" srccredit="Bengt Thuree" />
              </imageobject>

              <textobject>
                <phrase>Transaction Report for the Expenses accounts during
                March</phrase>
              </textobject>

              <caption><para>This image shows the Transaction Report for the
              various Expense accounts during March. </para></caption>
            </mediaobject>
          </screenshot>
        </listitem>
      </orderedlist>
    </sect2>
  </sect1>
</chapter>
